<!DOCTYPE html public>
<html>
<head>
  <style>
    .content {
      margin: 20px;
    }

    .editor {
      border: 1px dotted grey;
      padding: 2px;
    }

    .editor[focus = true] {
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <div class="content">
    <div id="editor" class="editor" style="width: 500px" role="textbox" tabindex=0>
      Some text in the editor.
    </div>
  </div>
  <script>
    var editor = document.getElementById("editor");
    document.addEventListener("keydown", cursor);
    document.addEventListener("keypress", type);
    editor.addEventListener("click", focusEditor);
    editor.addEventListener("focus", focusEditor);
    editor.addEventListener("blur", blurEditor);

    function blurEditor() {
      editor.setAttribute("focus", false);
    }

    function focusEditor() {
      editor.setAttribute("focus", true);
    }

    function cursor(event) {
      if (!editor.getAttribute("focus"))
        return;

      if (event.keyCode == 8) {
        event.preventDefault();
        editor.innerHTML = editor.innerHTML.substring(0, editor.innerHTML.length - 1);
      }

      if (event.keyCode == 13) {
        blurEditor();
      }

      event.stopPropagation();
      return;
    }

    function type(event) {
      if (!editor.getAttribute("focus"))
        return;

      if (!event.charCode)
        return;

      var char = String.fromCharCode(event.charCode);
      currentText = editor.innerHTML;
      editor.innerHTML = currentText + char;

      event.stopPropagation();
    }
  </script>
</body>
</html>
